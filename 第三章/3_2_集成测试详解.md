# § 3.2 - 集成测试详解

## 一、概念

即使软件中的各个单元经过单元测试后发现均无问题，将这些单元集成到一起后，各单元在协同工作时仍然可能出现预料之外的问题。因此，执行**集成测试工作**是非常必要的。

**集成测试 (Integration Test)** (亦称综合测试、组装测试、联合测试)：指的是在**单元测试**工作完成之后，按照软件在设计阶段时所确定的**结构图**将每一个模块**连接**起来，进行进一步测试的流程。

- **目标**：软件中的各单元连接完毕后可以正常协同工作、软件行为正常。
- **测试内容**：各单元间的接口、集成后的功能。
- **开始时间**
	- ...... -> *详细设计* -> 编码 -> 编译 -> 单元测试 -> **集成测试** -> 系统测试 -> ......  **(理论)**。
	- 集成测试与单元测试同步进行 **(实际工作)**。
- **设计依据**：概要设计说明书、详细设计说明书。***[详见下图 ]***

![软件开发流程](https://github.com/Lingggao/Software-Testing-Basics/blob/master/%E7%AC%AC%E4%B8%89%E7%AB%A0/3_1_%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B.png?raw=true)

## 二、测试内容

集成测试主要针对以下**五个方面**对软件单元进行测试：

1. 数据在软件各单元的接口之间传输时是否会出现丢失。
2. 某个模块是否会破坏另一个模块的功能。
3. 各个子功能组装完毕后能否实现主功能。
4. 全局数据结构是否存在问题。
5. 是否存在误差堆积的问题。

> 注：集成测试一般由开发工程师与测试工程师共同完成，结合使用白盒与黑盒测试方法。软件集成测试具体分为**非增量式**与**增量式**两种形式。

## 三、测试形式

<img src="https://github.com/Lingggao/Software-Testing-Basics/blob/master/%E7%AC%AC%E4%B8%89%E7%AB%A0/3_2_%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95.png?raw=true" width = "70%" />

### :one: 非增量式测试

**非增量式测试**（先分散再集中）：指的是使用**一步到位**的方法来构造测试，在软件各个相关联模块均完成单元测试后，直接将多个模块集成起来，共同开展集成测试工作。**在实际工作中，一般不使用非增量式测试**。

- **优点**：节省时间。
- **缺点**：难以定位与修复缺陷、可能导致新旧缺陷混杂。

### :two: 增量式测试

**增量式测试**（逐步集中与测试）：指的是使用**逐步集成**的方法来构造测试。增量式测试方法**优于**非增量式测试方法，具体分为 **“自顶向下”、“自底向上”、“混合增量”** 三种形式，将通过下方的示例进行详细介绍。

示例：假设待测试软件的各模块**结构图**如下：

<img src="https://github.com/Lingggao/Software-Testing-Basics/blob/master/%E7%AC%AC%E4%B8%89%E7%AB%A0/3_2_%E7%BB%93%E6%9E%84%E5%9B%BE.png?raw=true" width = "40%" />

1. **自顶向下**：首先找到**主控模块**（亦称关键模块），主控模块通常至少具备以下特征之一：
	- 满足软件的主要需求。
	- 在软件的模块结构中位于较高层次。
	- 复杂且易出错。
	- 有明确定义了的性能要求。
	
	**将主控模块作为测试驱动器，根据集成方式，将下层的桩模块依次替换为真正的软件模块进行测试**。在每个模块被集成时，都要先进行单元测试。按照**深度优先**或**广度优先**的方式进行集成。
	
	- **深度优先方式**：优先集成软件结构中的某一个主控路径下的所有模块，路径可以任意选择。
	- **广度优先方式**：沿着水平方向依次将每一层中直接隶属于上一层的模块集成起来，直到最后一层。

	以上方的待测试软件为例，深度优先与广度优先的集成顺序分别如下图所示 (按**红橙黄绿蓝紫**颜色顺序)：
	

<img src="https://github.com/Lingggao/Software-Testing-Basics/blob/master/%E7%AC%AC%E4%B8%89%E7%AB%A0/3_2_%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88.png?raw=true" width = "40%" /><img src="https://github.com/Lingggao/Software-Testing-Basics/blob/master/%E7%AC%AC%E4%B8%89%E7%AB%A0/3_2_%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88.png?raw=true" width = "40%" />

2. **自底向上**：与自顶向下形式**相反**，从底层模块逐渐向主控模块进行测试 (按**红橙黄绿蓝紫**颜色顺序)：

<img src="https://github.com/Lingggao/Software-Testing-Basics/blob/master/%E7%AC%AC%E4%B8%89%E7%AB%A0/3_2_%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A.png?raw=true" width = "40%" />

3. **混合增量**：将自顶向下与自底向上两种形式**混合使用**，同时利用二者优点并摒弃缺点。在实际工作中，一般会优先测试**输入输出模块**与**引入了新算法的模块**（衍变了的自顶向下形式）。

### :three: 比较

**自顶向下与自底向上测试方式的比较**：

|      |                      自顶向下增量式测试                      |                      自底向上增量式测试                      |
| ---- | :----------------------------------------------------------: | :----------------------------------------------------------: |
| 优点 | 可以做到逐步求精、可以直接的看到系统框架、容易发现上层接口存在的缺陷、不需要驱动模块。 | 容易发现底层模块中存在的缺陷、驱动模块可以模拟所有调用参数，便于生成测试数据。 |
| 缺点 | 需要提供桩模块、底层模块中的缺陷发现时间较晚、如果未接入输入输出模块的话，难以在桩模块中表示测试数据。 |        直至最后一个模块继承完毕后才可以看到系统框架。        |

---

[**回到顶部**](https://github.com/Lingggao/Software-Testing-Basics/blob/master/%E7%AC%AC%E4%B8%89%E7%AB%A0/3_2_%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E8%AF%A6%E8%A7%A3.md#-32---%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E8%AF%A6%E8%A7%A3)

[**下一章节：§ 3.3 - 系统测试详解**]()

[**回到主页**](https://github.com/Lingggao/Software-Testing-Basics#%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0)